<div class="table-wrapper">
  @if (!isLoading && movies.length > 0) {
    <table class="movies-table">
      <thead>
      <tr>
        <th class="checkbox-column">
          <input
            type="checkbox"
            class="checkbox-input"
            [checked]="isAllSelectedValue()"
            (change)="onToggleSelectAll()"
            aria-label="Ch·ªçn t·∫•t c·∫£"
          />
        </th>
        <th>Poster</th>
        <th>Ti√™u ƒê·ªÅ</th>
        <th>NƒÉm</th>
        <th>Th·ªÉ Lo·∫°i</th>
        <th>Tr·∫°ng Th√°i</th>
        <th>ƒê√°nh Gi√°</th>
        <th>H√†nh ƒê·ªông</th>
      </tr>
      </thead>
      <tbody>
      @for (movie of movies; track movie.id) {
        <tr [class.selected]="selectedMovies.has(movie.id)">
          <td class="checkbox-column">
            <input
              type="checkbox"
              class="checkbox-input"
              [checked]="selectedMovies.has(movie.id)"
              (change)="onToggleSelect(movie.id)"
              [attr.aria-label]="'Ch·ªçn ' + movie.title"
            />
          </td>
          <td class="poster-column">
            <img
              [src]="movie.posterUrl"
              [alt]="movie.title"
              class="movie-poster"
            />
          </td>
          <td class="title-column">{{ movie.title }}</td>
          <td>{{ toYearFormat(movie.releaseDate) }}</td>
          <td>
            <div class="genres-list">
              @for (genre of movie.genres; track genre) {
                <span class="genre-tag">
                  {{ genre.name }}
                </span>
              }
            </div>
          </td>
          <td>
          <span class="status-badge" [class]="getStatusClass(movie.status.toString())">
            {{ movie.status }}
          </span>
          </td>
          <td>
            <div class="rating">
              <span class="stars">‚òÖ</span>
              <span class="rating-value">{{ movie.avgRating }}</span>
            </div>
          </td>
          <td class="actions-column">
            <button class="action-btn edit" (click)="onEdit(movie.id)" title="S·ª≠a">
              ‚úé
            </button>
            <button class="action-btn delete" (click)="onDelete(movie.id)" title="X√≥a">
              üóë
            </button>
          </td>
        </tr>
      }
      </tbody>
    </table>
  }

  @if (!isLoading && movies.length === 0) {
    <div class="empty-state">
      <p class="empty-message">Kh√¥ng c√≥ phim n√†o</p>
    </div>
  }

  @if (isLoading) {
    <div class="loading-state">
      <div class="spinner"></div>
      <p>ƒêang t·∫£i...</p>
    </div>
  }
</div>
