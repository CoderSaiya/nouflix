<div class="table-wrapper">
  @if (!isLoading && users.length > 0) {
  <table class="users-table">
    <thead>
      <tr>
        <th class="checkbox-column">
          <input type="checkbox" class="checkbox-input" [checked]="isAllSelectedValue()" (change)="onToggleSelectAll()"
            aria-label="Chọn tất cả" />
        </th>
        <th>Tên</th>
        <th>Email</th>
        <th>Vai Trò</th>
        <th>Trạng Thái</th>
      </tr>
    </thead>
    <tbody>
      @for (user of users; track user.userId) {
      <tr>
        <td class="checkbox-column">
          <input type="checkbox" class="checkbox-input" [checked]="selectedUsers.has(user.userId)"
            (change)="onToggleSelect(user.userId)" [attr.aria-label]="'Chọn ' + getFullName(user)" />
        </td>
        <td class="name-column">{{ getFullName(user) }}</td>
        <td class="email-column">{{ user.email }}</td>
        <td>
          <span class="role-badge" [class]="getRoleClass(user.role)">
            {{ user.role }}
          </span>
        </td>
        <td>
          <button class="status-toggle" [class]="getStatusClass(user.isBanned)" (click)="onToggleStatus(user.userId)"
            [title]="'Nhấp để thay đổi trạng thái'">
            {{ user.isBanned ? "Bị Cấm" : "Hoạt động" }}
          </button>
        </td>
      </tr>
      }
    </tbody>
  </table>
  }

  @if (!isLoading && users.length === 0) {
  <div class="empty-state">
    <p class="empty-message">Không có người dùng nào</p>
  </div>
  }

  @if (isLoading) {
  <div class="loading-state">
    <div class="spinner"></div>
    <p>Đang tải...</p>
  </div>
  }
</div>