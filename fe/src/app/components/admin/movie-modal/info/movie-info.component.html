<div [formGroup]="infoForm" class="form-section">
  <h3 class="section-title">Thông Tin Cơ Bản</h3>

  <div class="form-group">
    <label for="title" class="form-label">Tiêu Đề *</label>
    <input
      type="text"
      id="title"
      formControlName="title"
      class="form-input"
      placeholder="Nhập tiêu đề phim"
    />
    @if (infoForm.get('title')?.invalid && infoForm.get('title')?.touched) {
      <div class="form-error">
        Tiêu đề là bắt buộc (tối thiểu 3 ký tự)
      </div>
    }
  </div>

  <div class="form-row">
    <div class="form-group">
      <label for="type" class="form-label">Loại Phim *</label>
      <select id="type" formControlName="type" class="form-input">
        @for (entry of movieTypeEntries; track entry[0]) {
          <option [value]="entry[0]">{{ entry[1] }}</option>
        }
      </select>
    </div>

    <div class="form-group">
      <label for="year" class="form-label">Năm Phát Hành *</label>
      <input
        type="number"
        id="year"
        formControlName="year"
        class="form-input"
      />
    </div>

    <div class="form-group">
      <label for="rating" class="form-label">Đánh Giá (0-10) *</label>
      <input
        type="number"
        id="rating"
        formControlName="rating"
        class="form-input"
        min="0"
        max="10"
        step="0.1"
      />
    </div>
  </div>

  <div class="form-row">
    <div class="form-group">
      <label for="releaseDate" class="form-label">Ngày Phát Hành *</label>
      <input
        type="date"
        id="releaseDate"
        formControlName="releaseDate"
        class="form-input"
      />
    </div>

    <div class="form-group">
      <label for="status" class="form-label">Trạng Thái *</label>
      <select id="status" formControlName="status" class="form-input">
        @for (entry of publishStatusEntries; track entry[0]) {
          <option [value]="entry[0]">{{ entry[1] }}</option>
        }
      </select>
    </div>
  </div>

  <div class="form-group">
    <label class="form-label">Thể Loại *</label>
    <div class="genre-grid">
      @for (g of genres; track g.id) {
        <label class="checkbox-label">
          <input
            type="checkbox"
            [checked]="isGenreSelectedId(g.id)"
            (change)="emitToggleGenre(g.id)"
            class="checkbox-input"
            [attr.aria-checked]="isGenreSelectedId(g.id)"
          />
          <span>{{ g.name }}</span>
        </label>
      }
    </div>
  </div>

  <div class="form-group">
    <label class="form-label">Thể Loại *</label>
    <div class="genre-grid">
      @for (s of studios; track s.id) {
        <label class="checkbox-label">
          <input
            type="checkbox"
            [checked]="isStudioSelectedId(s.id)"
            (change)="emitToggleStudio(s.id)"
            class="checkbox-input"
            [attr.aria-checked]="isStudioSelectedId(s.id)"
          />
          <span>{{ s.name }}</span>
        </label>
      }
    </div>
  </div>

  <div class="form-group">
    <label for="description" class="form-label">Mô Tả *</label>
    <textarea
      id="description"
      formControlName="description"
      class="form-textarea"
      placeholder="Nhập mô tả phim"
      rows="4"
    ></textarea>
  </div>

  <h3 class="section-title" style="margin-top: 2rem">Thông Tin Bổ Sung</h3>

  <div class="form-row">
    <div class="form-group">
      <label for="director" class="form-label">Đạo Diễn</label>
      <input
        type="text"
        id="director"
        formControlName="director"
        class="form-input"
        placeholder="Nhập tên đạo diễn"
      />
    </div>
  </div>

  <!-- Series-specific fields -->
  @if (infoForm.get('type')?.value === MovieType.Series) {
    <div class="form-row">
      <div class="form-group">
        <label for="numberOfSeasons" class="form-label">Số Mùa</label>
        <input
          type="number"
          id="numberOfSeasons"
          formControlName="numberOfSeasons"
          class="form-input"
          min="1"
        />
      </div>

      <div class="form-group">
        <label for="numberOfEpisodes" class="form-label">Tổng Số Tập</label>
        <input
          type="number"
          id="numberOfEpisodes"
          formControlName="numberOfEpisodes"
          class="form-input"
          min="1"
        />
      </div>
    </div>
  }
</div>
